+++
title = "Django-Notification Creating Notice Types issues"
date = 2009-03-09T11:03:00Z
updated = 2009-03-09T11:16:31Z
tags = ["django", "django-notification", "python", "management.py"]
categories = ["blog"]
topics = ["blog"]
slug = "django-notification-creating-notice-types-issues"
url = "blog/2009/03/django-notification-creating-notice-types-issues/"
+++

I was setting up <a href="http://code.google.com/p/django-notification/">Django-Notification</a> for a project, and I was trying to create notice types like it mentions on their <a href="http://code.google.com/p/django-notification/wiki/IntegratingNotification">wiki</a> . Their wiki says that you should add the following code to your management.py file in your app.<br /><br /><blockquote><pre class="prettyprint"><a name="Creating_Notice_Types"><span class="kwd">from</span><span class="pln"> django</span><span class="pun">.</span><span class="pln">conf </span><span class="kwd">import</span><span class="pln"> settings<br /></span><span class="kwd">from</span><span class="pln"> django</span><span class="pun">.</span><span class="pln">db</span><span class="pun">.</span><span class="pln">models </span><span class="kwd">import</span><span class="pln"> signals<br /></span><span class="kwd">from</span><span class="pln"> django</span><span class="pun">.</span><span class="pln">utils</span><span class="pun">.</span><span class="pln">translation </span><span class="kwd">import</span><span class="pln"> ugettext_noop </span><span class="kwd">as</span><span class="pln"> _<br /><br /></span><span class="kwd">if</span><span class="pln"> </span><span class="str">"notification"</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> settings</span><span class="pun">.</span><span class="pln">INSTALLED_APPS</span><span class="pun">:</span><span class="pln"><br />  </span><span class="kwd">from</span><span class="pln"> notification </span><span class="kwd">import</span><span class="pln"> models </span><span class="kwd">as</span><span class="pln"> notification<br /><br />  </span><span class="kwd">def</span><span class="pln"> create_notice_types</span><span class="pun">(</span><span class="pln">app</span><span class="pun">,</span><span class="pln"> created_models</span><span class="pun">,</span><span class="pln"> verbosity</span><span class="pun">,</span><span class="pln"> </span><span class="pun">**</span><span class="pln">kwargs</span><span class="pun">):</span><span class="pln"><br />      notification</span><span class="pun">.</span><span class="pln">create_notice_type</span><span class="pun">(</span><span class="str">"friends_invite"</span><span class="pun">,</span><span class="pln"> _</span><span class="pun">(</span><span class="str">"Invitation Received"</span><span class="pun">),</span><span class="pln"> _</span><span class="pun">(</span><span class="str">"you have received an invitation"</span><span class="pun">))</span><span class="pln"><br />      notification</span><span class="pun">.</span><span class="pln">create_notice_type</span><span class="pun">(</span><span class="str">"friends_accept"</span><span class="pun">,</span><span class="pln"> _</span><span class="pun">(</span><span class="str">"Acceptance Received"</span><span class="pun">),</span><span class="pln"> _</span><span class="pun">(</span><span class="str">"an invitation you sent has been accepted"</span><span class="pun">))</span><span class="pln"><br /><br />  signals</span><span class="pun">.</span><span class="pln">post_syncdb</span><span class="pun">.</span><span class="pln">connect</span><span class="pun">(</span><span class="pln">create_notice_types</span><span class="pun">,</span><span class="pln"> sender</span><span class="pun">=</span><span class="pln">notification</span><span class="pun">)</span><span class="pln"><br /></span><span class="kwd">else</span><span class="pun">:</span><span class="pln"><br />  </span><span class="kwd">print</span><span class="pln"> </span><span class="str">"Skipping creation of NoticeTypes as notification app not found"<br /><br /></span></a></pre></blockquote>After trying lots of different things (dropping database and re syncing,etc) the management file wasn't getting picked up and it was quite annoying.<br /><br />It turns out that if you have written custom management extensions and you have a management directory under your application it will ignore the management.py file all together. So you need to add the code to the app/management/__init__.py file instead.<br /><br />Once you have added the files you need to resync (make sure you remove notification_* tables first).<br /><br />This makes total sense now, and I guess I shouldn't have taken the directions to literaly.<br /><br />If you still can't get it to work, the other option is to just create a fixture and load the data that way.
